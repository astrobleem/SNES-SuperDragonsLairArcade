/**
* Dirk's upward dodge/accelerate prompt (D-pad up).
* RoadBlasters-era name retained for compatibility; prefer the up
* direction standard over this deprecated event label.
*/
.include "src/object/event/Event.accelerate.h"
.section "Event.accelerate"

  METHOD init
  rep #$31

  jsr Event.template.initCommon

  lda event.endFrame
  NEW Turbo_icon.CLS.PTR this.sprite 112 80
  lda event.endFrame
  CALL Turbo_icon.reset.MTD this.sprite 112 80
  
  NEW Spc.CLS.PTR this.audio
  lda.w #SAMPLE.0.TURBO
  CALL Spc.SpcPlaySoundEffect.MTD this.audio

  rts

  METHOD play
  rep #$31

  jsr Event.template.waitTimeline
  bcc +

  lda #JOY_DIR_DOWN
  jsr Event.template.triggerOnWrongInput
  bcs +

  ;kill self if player pressed appropriate button
  ldx #INPUT.DEVICE.ID.0
  jsr core.input.get.press
  and.w #JOY_DIR_UP
  beq ++

      jsr core.input.get.trigger
      and.w #JOY_DIR_UP
      beq +++
        lda this.age
        cmp #EVENT.BONUS.EXTRA.TIMEOUT
        bcs +++
          lda #PLAYER.BONUS.EXTRA
          bra ++++
++
          lda #PLAYER.BONUS.DEFAULT
+++
          NEW Sprite.score.CLS.PTR oopCreateNoPtr 112 80
          CALL Event.confirm.kill.MTD iterator.self
          rts

+

  jsr abstract.Event.checkResult

+ rts

  METHOD kill
  jsr Event.template.kill

  CLASS Event.accelerate
.ends
	
