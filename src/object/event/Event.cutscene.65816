/**
* Generic cutscene-style event with timed result triggering.
*/
.include "src/object/event/Event.cutscene.h"

.macro DEFINE_CUTSCENE_EVENT name
.section "Event.\\1"
  METHOD init
  rep #$31

  lda OBJECT.CALL.ARG.1,s
  sta.b event.startFrame
  lda OBJECT.CALL.ARG.2,s
  sta.b event.endFrame
  lda OBJECT.CALL.ARG.3,s
  sta.b event.result
  lda OBJECT.CALL.ARG.4,s
  sta.b event.resultTarget

  rts

  METHOD play
  rep #$31
  jsr abstract.Event.checkResult
  rts

  METHOD kill
  rep #$31
  lda #OBJR_kill
  sta 3,s
  rts

  CLASS Event.\\1
.ends
.endsection
.endm

DEFINE_CUTSCENE_EVENT start_alive
DEFINE_CUTSCENE_EVENT start_dead
DEFINE_CUTSCENE_EVENT enter_room
DEFINE_CUTSCENE_EVENT enter_room_left
DEFINE_CUTSCENE_EVENT enter_room_right
DEFINE_CUTSCENE_EVENT enter_room_up
DEFINE_CUTSCENE_EVENT enter_room_down
DEFINE_CUTSCENE_EVENT enter_room_upleft
DEFINE_CUTSCENE_EVENT exit_room
DEFINE_CUTSCENE_EVENT game_over
