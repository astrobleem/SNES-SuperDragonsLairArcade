/**
* Generic cutscene-style event with timed result triggering.
*/
.include "src/object/event/Event.cutscene.h"

.macro DEFINE_CUTSCENE_EVENT name
.section "Event.\\1"
  METHOD init
  rep #$31

  lda OBJECT.CALL.ARG.1,s
  sta.b event.startFrame
  lda OBJECT.CALL.ARG.2,s
  sta.b event.endFrame
  lda OBJECT.CALL.ARG.3,s
  sta.b event.result
  lda OBJECT.CALL.ARG.4,s
  sta.b event.resultTarget

  rts

  METHOD play
  rep #$31
  jsr abstract.Event.checkResult
  rts

  METHOD kill
  rep #$31
  lda #OBJR_kill
  sta 3,s
  rts

  CLASS Event.\\1
.ends
.endsection
.endm

DEFINE_CUTSCENE_EVENT start_alive
DEFINE_CUTSCENE_EVENT start_dead
DEFINE_CUTSCENE_EVENT enter_room
DEFINE_CUTSCENE_EVENT enter_room_left
DEFINE_CUTSCENE_EVENT enter_room_right
DEFINE_CUTSCENE_EVENT enter_room_up
DEFINE_CUTSCENE_EVENT enter_room_down
DEFINE_CUTSCENE_EVENT enter_room_upleft
DEFINE_CUTSCENE_EVENT exit_room
DEFINE_CUTSCENE_EVENT game_over

; Attract mode and chapter intros
DEFINE_CUTSCENE_EVENT attract_mode_attract_movie
DEFINE_CUTSCENE_EVENT attract_mode_insert_coins
DEFINE_CUTSCENE_EVENT introduction_castle_exterior

; Shared death / failure cinematics
DEFINE_CUTSCENE_EVENT alice_room_burned_to_death
DEFINE_CUTSCENE_EVENT flaming_ropes_burns_hands
DEFINE_CUTSCENE_EVENT flaming_ropes_fall_to_death
DEFINE_CUTSCENE_EVENT flaming_ropes_misses_landing
DEFINE_CUTSCENE_EVENT flying_horse_burned_to_death
DEFINE_CUTSCENE_EVENT giddy_goons_fall_to_death
DEFINE_CUTSCENE_EVENT rolling_balls_pit_in_ground
DEFINE_CUTSCENE_EVENT tilting_room_catches_fire
DEFINE_CUTSCENE_EVENT tilting_room_falls_to_death
DEFINE_CUTSCENE_EVENT tilting_room_wrong_door
DEFINE_CUTSCENE_EVENT falling_platform_long_fell_to_death
DEFINE_CUTSCENE_EVENT falling_platform_short_fell_to_death
DEFINE_CUTSCENE_EVENT vestibule_fell_to_death

; Chapter progression beats and simple closers
DEFINE_CUTSCENE_EVENT bower_trapped_in_wall
DEFINE_CUTSCENE_EVENT throne_room_on_throne
DEFINE_CUTSCENE_EVENT wind_room_sucked_in
DEFINE_CUTSCENE_EVENT the_dragons_lair_endgame
