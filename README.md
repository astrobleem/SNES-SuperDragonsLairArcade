# Super Dragon's Lair Arcade (SNES)

![Complete Package](schwag/complete_package.png)

**Super Dragon's Lair Arcade** is a full-motion-video (FMV) retheme of RoadBlaster for the Super Nintendo Entertainment System, targeting real NTSC SNES hardware with MSU-1 audio/video on SD2SNES/FXPAK Pro.

This faithful recreation of the 1983 arcade classic brings the legendary laserdisc adventure to your SNES console, complete with authentic packaging and documentation reminiscent of the 16-bit era.

## What's in the Box

Your complete Super Dragon's Lair Arcade package includes:

- **Game Cartridge** - The SNES ROM with MSU-1 enhancement chip support
- **User Manual** - Complete 4-page instruction booklet with story, controls, and survival guide
- **Holographic Trading Card** - Collectible card featuring Dirk the Daring
- **Soundtrack CD** - Original arcade audio tracks in CD quality
- **Sticker Sheet** - Dragon's Lair themed stickers
- **Warranty Card** - Official product registration
- **Upcoming Releases Preview** - Sneak peek at future titles

> [!NOTE]
> All schwag materials are available in the [`schwag/`](schwag) directory for your enjoyment and nostalgia.

## Recent milestones
- **Build System Enhanced (Nov 2024):**
  - ✅ **WLA-DX Assembler Built** - Successfully compiled wla-65816, wla-spc700, and wlalink for WSL
  - ✅ **Superfamiconv Integration** - ~100× faster builds via `USE_SUPERFAMICONV=1` environment variable
  - ✅ **Pre-Build Validation** - `check_image_dimensions.py` catches asset errors in 1 second
  - ✅ **Enhanced Make Clean** - Now removes Python cache; `clean-all` target for deep cleaning
  - ✅ **Build Documentation** - Comprehensive `BUILD.md` with troubleshooting guide
- **Graphics Pipeline Modernized:**
  - Created `img_processor.py` for image resizing/quantization to SNES resolutions (256×224, color reduction)
  - Created `gfx_converter.py` unified wrapper for `superfamiconv` and `gracon.py` with consistent output naming
  - Integrated `superfamiconv` (~100× faster than gracon.py) for rapid asset conversion
  - Processed first Dragon's Lair background (high score screen) with full documentation
  - All background and sprite description files converted to Dragon's Lair theme
- **Asset Documentation Complete:**
  - All 9 background folders now have Dragon's Lair themed `.txt` description files
  - All 16 sprite descriptions updated to medieval fantasy theme
  - Legacy RoadBlaster sprites clearly marked (brake, dashboard, steering wheels, turbo)
  - Created workflow guides for future asset processing
- **Python 3 Compatibility:** All tools modernized; `gracon.py` performance issues resolved
- **Script Flow Documentation:** Boot/title/score/MSU1 flow documented in `src/README.md`
- **Chapter Coverage:** 516 chapters tracked; 0 markers unmapped (captured in `data/chapter_event_inventory.md`)

## Scope and goals
- Recreate the Dragon's Lair arcade experience on the SNES while retaining the RoadBlaster MSU-1 FMV engine
- Replace all RoadBlaster assets with Dragon's Lair equivalents (video, audio, sprites, UI, prompts) while preserving arcade timings and cues
- Produce a fully playable SNES ROM plus MSU-1 PCM/data set for real hardware

## Build at a glance

### Requirements
- **OS:** Linux/WSL (Ubuntu) or Windows with WSL
- **Build Tools:** `make`, `gcc` (for WLA-DX, pre-built binaries included)
- **Python:** Python 3.10+ with Pillow
  ```bash
  # WSL/Ubuntu
  sudo apt-get install python3-pip python3-pil
  
  # Or via pip
  pip install -r requirements.txt
  ```

### Quick Build (Standard)
```bash
# From Windows PowerShell with WSL
wsl bash -c "cd /mnt/e/gh/SNES-SuperDragonsLairArcade && make clean && make"

# Or from WSL directly
make clean
make
```

### Fast Build (Superfamiconv - Recommended)
```bash
# Windows: Use the batch file
build_with_superfamiconv.bat

# WSL: Set environment variable
USE_SUPERFAMICONV=1 make
```
**Speed:** ~100× faster graphics conversion (1 sec vs 96 sec per large image)

### Pre-Build Validation (Recommended)
Catch asset errors before building:
```bash
# Quick dimension check (1 second)
wsl python3 tests/check_image_dimensions.py

# Full validation with conversion test (~5 minutes)
wsl python3 tests/test_background_assets.py
```

**Output:** ROM binary at `build/SuperDragonsLairArcade.sfc`

> [!NOTE]
> MSU-1 PCM/data files are not generated by default; they require Dragon's Lair video/audio captures.

**See [`BUILD.md`](BUILD.md) for detailed build instructions and troubleshooting.**

## Documentation map
- `README.md` (this file) – Project overview and status
- **[`BUILD.md`](BUILD.md)** – **Build instructions, troubleshooting, and validation**
- `src/README.md` – Boot/title/score/MSU1 script flow and theming
- `tools/README.md` – Complete graphics tools documentation and workflows
- `data/backgrounds/*/README.md` – Background-specific guides (see hiscore.gfx_bg)
- `data/backgrounds/README.md` – Background asset status
- `data/sprites/README.md` – Sprite inventory and descriptions
- `data/sounds/README.md` – Sound system and asset documentation
- `data/events/README.md` – Chapter XML reference
- `data/chapter_event_inventory.md` – Event coverage tracking

## Hardware targets
- NTSC Super Nintendo hardware
- SD2SNES / FXPAK Pro (MSU-1 required)
- SNES9x / bsnes for debugging and iteration

## Graphics Workflow Quick Reference

```bash
# Step 1: Prepare artwork (resize + quantize to 16 colors)
python tools/img_processor.py \
  --input source_artwork.png \
  --output data/backgrounds/name.gfx_bg/name.gfx_bg.png \
  --width 256 --height 224 --mode cover --colors 16

# Step 2: Build (automatic conversion)
make

# Output: build/data/backgrounds/name.gfx_bg.animation
```

See `tools/README.md` for detailed documentation.

## License
This project includes no commercial Dragon's Lair assets. All extracted assets must be supplied by the user. This repository contains engine code and converter tools only.
